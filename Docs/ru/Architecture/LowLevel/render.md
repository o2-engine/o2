## Рендер
За рендеринг отвечает отдельная подсистема Render, с макросом быстрого доступа o2Render.

В нем инициализируется рендер и нужные API, если требуется. Через него происходит отрисовка мешей, с использованием батчинга. Можно задавать камеру, отсечение, ренеринг в текстуру.

Так же в подсистему рендера входят базовые примитивы: спрайт, текст и эффекты частиц.

### Текстуры
Для работы с текстурами используется класс `o2::Texture` и ссылки на них `o2::TextureRef`. Текстуры - это как правило атласы, загруженные с диска, или рендер-таргеты.

Важно знать, что текстуры и ImageAsset'ы - это отдельные сущности. Текстуры - это текстуры в видеопамяти, а ImageAsset'ы могут быть отображены как частью текстуры (в атласе), так и быть самостоятельной текстурой.

Текстура может быть создана сама по себе, в нее может быть загружен растр, она может быть загружена с диска в определенном формате. 

Текстура может быть рендер-таргетом, для этого она создается с соответствующим флагом.

### Камера, o2::Camera
Задает транформацию, через которую сцена рендерится в текущий момент. Положение задается через интерфейс `o2::Transform`. Фактически трансформацию камеры можно воспринимать как окно, через которое мы смотрим на сцену

### Меши, o2::Mesh
Для отрисовки графики используются меши, из них строятся спрайты, текст и тд.

Меш состоит из буффера вершин и индексов полигонов. В нем задается текстура.

При передаче меша в отрисовку, его вершины и индексы копируются в буффер текущего батча, если текстура не изменилась. Иначе, создается новый батч, а предыдущий отправляется на отрисовку.

### IDrawable
Это базовый интерфейс рисуемой сущности, запоминает во время отрисовки текущий прямоугольник отсечения

### IRectDrawable
Базовый примитив прямоугольной отрисовываемой сущности. Наследуется от `o2::Transform`, имеет цвет, прохрачность и может отключаться

### Спрайты, o2::Sprite
Наследуется от `o2::IRectDrawable`. Спрайт задается текстурой и областью из нее. По умолчанию это задается через `o2::ImageAsset`. Так же спрайт можно создать без текстуры, тогда будет использована дефолтная белая текстура.

У спрайта задается режим отрисовки Mode:
- Default - по умолчанию, арстягивается во все стороны
- Sliced - растягивается с сохранением пропорций границ, 9-slice
- Tiled - при растягивании текстура дублируется
- FixedAspect - сохраняется соотношение сторон спрайта, вписывается в размер спрайта
- FillLeftToRight, FillRightToLeft, FillUpToDown, FillDownToUp - заполнение спрайта по горизонтали/вертикали
- Fill360CW, Fill360CCW - заполнение спрайта по/против часовой стрелки

Трансформации, цвет, прозрачность - задаются через базовый класс `IRectDrawable`.

### Текст, o2::Text
Наследуется от `o2::IRectDrawable`. В нем задается шрифт (векторный или растровый), размер текста, форматирование текста и сам текст.

Шрифт задается через ассет `o2::FontAsset`, у которого может быть 2 реализации: `o2::VectorFontAsset` и `o2::BitmapFontAsset`.

Текст форматируется относительно прямоугольной области, задаваемой `o2::IRectDrawable`. В форматировании доступны следующие параметры:
- hor/verAlign выравнивание по горизонтали/вертикали 
- перенос слов на следующую строку при горизонтальном переполнении
- окончание строки троеточием (...) при горизонтальном переполнении
- коэф. межбуквенного и межстрочного расстояния

### Растровый и векторный шрифты
Растровый шрифт задается заранее заготовленными и отрендеренными символами в атласе и их описанием.

Векторный шрифт генерируется в рантайме, подрендеривая и упаковывая в специальный атлас нужные глифы. 

На векторный шрифт могут накладываться графические эффекты - обводка, градиент, тень и кастомные. Эти эффекты накладываются посимвольно, во время рендеринга глифифов в атлас, на CPU.

### Эффекты частиц, o2::ParticleEmitter
Эмитирует определенные частицы, занимается их динамикой и эффектами.

В нем задается форма, которая по размеру привязывается к интерфейсу `o2::IRectDrawable`. Задается лимит частиц, коло-во испускаемых в секунду частиц. Так же старотовые параметры частиц (скорость, угол)

Во время апдейта к частицам применяются эффекты, например гравитация и другие кастомные